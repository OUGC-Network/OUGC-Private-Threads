<tr>
    <td class="{$bgcolor2}" valign="top">
        <strong>{$lang->ougcPrivateThreadsFormTitle}:</strong><br/><span class="smalltext">{$lang->ougcPrivateThreadsFormTitleDescription}</span>
    </td>
    <td class="{$bgcolor2}" valign="top">
		<span class="smalltext">
			<input type="checkbox" class="checkbox" name="ougcPrivateThreadsFormCheckbox" value="1" {$checkedInput}
                   {$disabledInput} id="ougcPrivateThreadsFormCheckbox"/>
			<label for="ougcPrivateThreadsFormCheckbox">
				<strong>{$lang->ougcPrivateThreadsFormCheckbox}</strong>
			</label><br/><br/>
			<input type="text" class="textbox" name="ougcPrivateThreadsUserNamesInput" value="{$userNamesInputValue}"
                   id="ougcPrivateThreadsUserNamesInput"/>
			<label for="ougcPrivateThreadsUserNamesInput">
				{$lang->ougcPrivateThreadsFormAddUsers}
			</label><br/><br/>
		</span>
        <link rel="stylesheet" href="{$mybb->asset_url}/jscripts/select2/select2.css?ver=1807">
        <script type="text/javascript" src="{$mybb->asset_url}/jscripts/select2/select2.min.js?ver=1806"></script>
        <script type="text/javascript">
            <!--
            if(use_xmlhttprequest == "1")
            {
                MyBB.select2();
                $("#ougcPrivateThreadsUserNamesInput").select2({
                    placeholder: "{$lang->search_user}",
                    minimumInputLength: 2,
                    multiple: true,
                    allowClear: true,
                    ajax: { // instead of writing the function to execute the request we use Select2's convenient helper
                        url: "xmlhttp.php?action=get_users",
                        dataType: 'json',
                        data: function (term, page) {
                            return {
                                query: term, // search term
                            };
                        },
                        results: function (data, page) { // parse the results into the format expected by Select2.
                            // since we are using custom formatting functions we do not need to alter remote JSON data
                            return {results: data};
                        }
                    },
                    initSelection: function(element, callback) {
                        var query = $(element).val().replace(', ', ',');
                        if (query !== "") {
                            var newqueries = [];
                            exp_queries = query.split(",");
                            $.each(exp_queries, function(index, value ){
                                if(value.replace(/\s/g, '') != "")
                                {
                                    var newquery = {
                                        id: value.replace(/,\s?/g, ", "),
                                        text: value.replace(/,\s?/g, ", ")
                                    };
                                    newqueries.push(newquery);
                                }
                            });
                            callback(newqueries);
                        }
                    }
                });
            }
            // -->
        </script>
    </td>
</tr>